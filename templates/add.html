{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0"><i class="bi bi-plus-circle-fill"></i> เพิ่มงานใหม่</h2>
    </div>
    <div class="card-body">
      <form method="POST" class="needs-validation" novalidate>
        <div class="mb-4">
          <label for="work_date" class="form-label fw-bold">วันที่</label>
          <input type="date" class="form-control" id="work_date" name="work_date" value="{{ today }}" required>
          <div class="invalid-feedback">กรุณาเลือกวันที่</div>
        </div>
        <div class="mb-4">
          <label for="category" class="form-label fw-bold">ประเภทงาน</label>
          <input type="text" class="form-control" id="category" name="category" placeholder="เช่น Install, Printer, Scale">
        </div>
        <div class="mb-4">
          <label for="description" class="form-label fw-bold">รายละเอียดงาน</label>
          <textarea class="form-control" id="description" name="description" rows="4" placeholder="อธิบายงานที่ทำ" required></textarea>
          <div class="invalid-feedback">กรุณากรอกรายละเอียดงาน</div>
        </div>
        <div class="mb-4">
          <label for="status" class="form-label fw-bold">สถานะ</label>
          <select class="form-select" id="status" name="status">
            <option value="done" selected>เสร็จแล้ว</option>
            <option value="in progress">กำลังทำ</option>
            <option value="pending">รอดำเนินการ</option>
          </select>
        </div>
        <div class="d-flex justify-content-end gap-2">
          <a href="/" class="btn btn-outline-secondary">ยกเลิก</a>
          <button type="submit" class="btn btn-success btn-lg fw-bold"><i class="bi bi-save-fill"></i> บันทึกงาน</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
(() => {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })
})();
</script>
{% endblock %}
